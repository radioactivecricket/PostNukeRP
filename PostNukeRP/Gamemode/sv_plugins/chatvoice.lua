local malechatsounds = {}
local femalechatsounds = {}

	    
femalechatsounds["omfg"] = "vo/NovaProspekt/al_ohmygod.wav"
femalechatsounds["omg"] = "vo/npc/female01/goodgod.wav"
femalechatsounds["hacks"] = "vo/npc/female01/hacks01.wav"
femalechatsounds["hax"] = "vo/npc/female01/hacks02.wav"
femalechatsounds["incoming"] = "vo/canals/female01/stn6_incoming.wav"
femalechatsounds["get the hell out"] = "vo/npc/female01/gethellout.wav"
femalechatsounds["get down"] = "vo/npc/female01/getdown02.wav"
femalechatsounds["excuse me"] = "vo/npc/female01/excuseme01.wav"
femalechatsounds["fantastic"] = "vo/npc/female01/fantastic01.wav"
femalechatsounds["im busy"] = "vo/npc/female01/busy02.wav"
femalechatsounds["behind you"] = "vo/npc/female01/behindyou01.wav"
femalechatsounds["take some ammo"] = "vo/npc/female01/ammo04.wav"
femalechatsounds["i wont hold it against you"] = "vo/npc/female01/answer02.wav"
femalechatsounds["can we talk later"] = "vo/npc/female01/answer05.wav"
femalechatsounds["same here"] = "vo/npc/female01/answer07.wav"
femalechatsounds["know what you mean"] = "vo/npc/female01/answer08.wav"
femalechatsounds["talking to yourself"] = "vo/npc/female01/answer09.wav"
femalechatsounds["put it on your tombstone"] = "vo/npc/female01/answer11.wav"
femalechatsounds["with you"] = "vo/npc/female01/answer13.wav"
femalechatsounds["one way of looking at it"] = "vo/npc/female01/answer15.wav"
femalechatsounds["concentrate"] = "vo/npc/female01/answer18.wav"
femalechatsounds["mind is in the gutter"] = "vo/npc/female01/answer20.wav"
femalechatsounds["never know"] = "vo/npc/female01/answer22.wav"
femalechatsounds["why are you telling me"] = "vo/npc/female01/answer24.wav"
femalechatsounds["how about that"] = "vo/npc/female01/answer25.wav"
femalechatsounds["wanna bet"] = "vo/npc/female01/answer27.wav"
femalechatsounds["you talking to me"] = "vo/npc/female01/answer30.wav"
femalechatsounds["right on"] = "vo/npc/female01/answer32.wav"
femalechatsounds["leave it alone"] = "vo/npc/female01/answer39.wav"
femalechatsounds["reloading"] = "vo/npc/female01/coverwhilereload02.wav"
femalechatsounds["got one"] = "vo/npc/female01/gotone02.wav"
femalechatsounds["heads up"] = "vo/npc/female01/headsup02.wav"
femalechatsounds["help"] = "vo/npc/female01/help01.wav"
femalechatsounds["hello"] = "vo/npc/female01/hi01.wav"
femalechatsounds["ill stay here"] = "vo/npc/female01/illstayhere01.wav"
femalechatsounds["im hurt"] = "vo/npc/female01/imhurt02.wav"
femalechatsounds["lead the way"] = "vo/npc/female01/leadtheway01.wav"
femalechatsounds["lets go"] = "vo/npc/female01/letsgo01.wav"
femalechatsounds["nice"] = "vo/npc/female01/nice02.wav"
femalechatsounds["okay"] = "vo/npc/female01/ok02.wav"
femalechatsounds["im ready"] = "vo/npc/female01/okimready01.wav"
femalechatsounds["get out of your way"] = "vo/npc/female01/outofyourway02.wav"
femalechatsounds["over here"] = "vo/npc/female01/overhere01.wav"
femalechatsounds["pardon me"] = "vo/npc/female01/pardonme02.wav"
femalechatsounds["i dont dream"] = "vo/npc/female01/question03.wav"
femalechatsounds["deja vu"] = "vo/npc/female01/question05.wav"
femalechatsounds["part of the plan"] = "vo/npc/female01/question11.wav"
femalechatsounds["all getting worse"] = "vo/npc/female01/question12.wav"
femalechatsounds["someday"] = "vo/npc/female01/question20.wav"
femalechatsounds["odds are not good"] = "vo/npc/female01/question21.wav"
femalechatsounds["one of those days"] = "vo/npc/female01/question25.wav"
femalechatsounds["bullshit"] = "vo/npc/female01/question26.wav"
femalechatsounds["im hungry"] = "vo/npc/female01/question28.wav"
femalechatsounds["i cant remember"] = "vo/npc/female01/answer35.wav"
femalechatsounds["run"] = "vo/npc/female01/runforyourlife01.wav"
femalechatsounds["sorry"] = "vo/npc/female01/sorry01.wav"
femalechatsounds["im going"] = "vo/npc/female01/squad_affirm04.wav"
femalechatsounds["im coming"] = "vo/npc/female01/squad_approach04.wav"
femalechatsounds["follow me"] = "vo/npc/female01/squad_away03.wav"
femalechatsounds["wait for me"] = "vo/npc/female01/squad_reinforce_single04.wav"
femalechatsounds["take cover"] = "vo/npc/female01/takecover02.wav"
femalechatsounds["yeah"] = "vo/npc/female01/yeah02.wav"
femalechatsounds["zombies!"] = "vo/npc/female01/zombies02.wav"
femalechatsounds["take this medkit"] = "vo/npc/female01/health01.wav"

malechatsounds["omfg"] = "vo/NovaProspekt/al_ohmygod.wav"
malechatsounds["omg"] = "vo/npc/male01/goodgod.wav"
malechatsounds["hacks"] = "vo/npc/male01/hacks01.wav"
malechatsounds["hax"] = "vo/npc/male01/hacks02.wav"
malechatsounds["incoming"] = "vo/canals/male01/stn6_incoming.wav"
malechatsounds["get the hell out"] = "vo/npc/male01/gethellout.wav"
malechatsounds["get down"] = "vo/npc/male01/getdown02.wav"
malechatsounds["excuse me"] = "vo/npc/male01/excuseme01.wav"
malechatsounds["fantastic"] = "vo/npc/male01/fantastic01.wav"
malechatsounds["im busy"] = "vo/npc/male01/busy02.wav"
malechatsounds["behind you"] = "vo/npc/male01/behindyou01.wav"
malechatsounds["take some ammo"] = "vo/npc/male01/ammo04.wav"
malechatsounds["i wont hold it against you"] = "vo/npc/male01/answer02.wav"
malechatsounds["can we talk later"] = "vo/npc/male01/answer05.wav"
malechatsounds["same here"] = "vo/npc/male01/answer07.wav"
malechatsounds["know what you mean"] = "vo/npc/male01/answer08.wav"
malechatsounds["talking to yourself"] = "vo/npc/male01/answer09.wav"
malechatsounds["put it on your tombstone"] = "vo/npc/male01/answer11.wav"
malechatsounds["with you"] = "vo/npc/male01/answer13.wav"
malechatsounds["one way of looking at it"] = "vo/npc/male01/answer15.wav"
malechatsounds["concentrate"] = "vo/npc/male01/answer18.wav"
malechatsounds["mind is in the gutter"] = "vo/npc/male01/answer20.wav"
malechatsounds["never know"] = "vo/npc/male01/answer22.wav"
malechatsounds["why are you telling me"] = "vo/npc/male01/answer24.wav"
malechatsounds["how about that"] = "vo/npc/male01/answer25.wav"
malechatsounds["wanna bet"] = "vo/npc/male01/answer27.wav"
malechatsounds["you talking to me"] = "vo/npc/male01/answer30.wav"
malechatsounds["right on"] = "vo/npc/male01/answer32.wav"
malechatsounds["leave it alone"] = "vo/npc/male01/answer38.wav"
malechatsounds["reloading"] = "vo/npc/male01/coverwhilereload02.wav"
malechatsounds["got one"] = "vo/npc/male01/gotone02.wav"
malechatsounds["heads up"] = "vo/npc/male01/headsup01.wav"
malechatsounds["help"] = "vo/npc/male01/help01.wav"
malechatsounds["hello"] = "vo/npc/male01/hi01.wav"
malechatsounds["ill stay here"] = "vo/npc/male01/illstayhere01.wav"
malechatsounds["im hurt"] = "vo/npc/male01/imhurt02.wav"
malechatsounds["lead the way"] = "vo/npc/male01/leadtheway01.wav"
malechatsounds["lets go"] = "vo/npc/male01/letsgo02.wav"
malechatsounds["nice"] = "vo/npc/male01/nice.wav"
malechatsounds["okay"] = "vo/npc/male01/ok02.wav"
malechatsounds["im ready"] = "vo/npc/male01/okimready02.wav"
malechatsounds["get out of your way"] = "vo/npc/male01/outofyourway02.wav"
malechatsounds["over here"] = "vo/npc/male01/overhere01.wav"
malechatsounds["pardon me"] = "vo/npc/male01/pardonme02.wav"
malechatsounds["i dont dream"] = "vo/npc/male01/question03.wav"
malechatsounds["deja vu"] = "vo/npc/male01/question05.wav"
malechatsounds["part of the plan"] = "vo/npc/male01/question11.wav"
malechatsounds["all getting worse"] = "vo/npc/male01/question12.wav"
malechatsounds["someday"] = "vo/npc/male01/question20.wav"
malechatsounds["odds are not good"] = "vo/npc/male01/question21.wav"
malechatsounds["one of those days"] = "vo/npc/male01/question25.wav"
malechatsounds["bullshit"] = "vo/npc/male01/question26.wav"
malechatsounds["im hungry"] = "vo/npc/male01/question28.wav"
malechatsounds["i cant remember"] = "vo/npc/female01/question31.wav"
malechatsounds["run"] = "vo/npc/male01/runforyourlife01.wav"
malechatsounds["sorry"] = "vo/npc/male01/sorry01.wav"
malechatsounds["im going"] = "vo/npc/male01/squad_affirm03.wav"
malechatsounds["im coming"] = "vo/npc/male01/squad_approach04.wav"
malechatsounds["follow me"] = "vo/npc/male01/squad_away03.wav"
malechatsounds["wait for me"] = "vo/npc/male01/squad_reinforce_single04.wav"
malechatsounds["take cover"] = "vo/npc/male01/takecover02.wav"
malechatsounds["yeah"] = "vo/npc/male01/yeah02.wav"
malechatsounds["zombies!"] = "vo/npc/male01/zombies01.wav"
malechatsounds["take this medkit"] = "vo/npc/male01/health01.wav"


function PNRP.ChatSounds( ply, text )
	
	if string.find(string.lower(ply:GetModel()), "/female") or
		string.find(string.lower(ply:GetModel()), "mossman") or
	    string.find(string.lower(ply:GetModel()), "alyx") then
	
		for k, v in pairs( femalechatsounds ) do
		
			if string.find( string.lower( text ), k ) then
			
				ply:EmitSound( v )
				
			end
			
		end
	else
	
		for k, v in pairs( malechatsounds ) do
		
			if string.find( string.lower( text ), k ) then
			
				ply:EmitSound( v )
				
			end
			
		end
	end
	
	local chat = string.Explode( " ", text )
	local chatArray = {  }
	
 	for i,v in ipairs(chat) do table.insert(chatArray,v) end
	table.remove(chatArray,1)
	
	for cmd, func in pairs( PNRP.ChatCommands ) do
		--Runs Console Commands
		
		if string.lower(chat[1]) == "/run" then
		
			local sayString
			if chatArray != nil then
				sayString = " "
				
				for i,v in ipairs(chatArray) do sayString = sayString.." "..v end
				
				ply:ConCommand(sayString)
				return ""
				
			else
					
				ply:ConCommand(chat[2])
				return ""
				
			end
		elseif string.lower(chat[1]) == cmd then --Runs /Commands
				
			if chat[2] != "" then
				
				if chat[3] != "" then
		
					func( ply, chat[2], chat[3] )
					return ""
				
				else
					
					func( ply, chat[2] )
					return ""
				end
				
			else

				func( ply )
				return ""
				
			end	
			
		end
		
	end	
	
	for cmd, cnCmd in pairs( PNRP.ChatConCommands ) do
		
		if string.lower(chat[1]) == cmd then --Runs /ConCommands
			local sayString
			if chatArray != nil then
				
				sayString = cnCmd.." "
				for i,v in ipairs(chatArray) do sayString = sayString.." "..v end

				ply:ConCommand(sayString)
				return ""
				
			else
		
				ply:ConCommand( cnCmd )
				return ""
		
			end	
	
		end
	
	end
	
end
	
hook.Add("PlayerSay", "PNRPChatSounds", PNRP.ChatSounds)


function GM:PlayerCanHearPlayersVoice( pListener, pTalker )
	local curDistance = pListener:GetShootPos():Distance(pTalker:GetShootPos())
	local maxDistance = GetConVarNumber("pnrp_voiceDist")
	local senderChnl = pTalker.Channel
	local listenerChnl = pListener.Channel
	local senderRdioOn = (pTalker.RdioPower and pTalker:HasWeapon("weapon_radio"))
	local listenerRdioOn = (pListener.RdioPower and pListener:HasWeapon("weapon_radio"))
	
	if GetConVarNumber("pnrp_voiceLimit") == 1 then
		if curDistance < maxDistance then
			return true, true
		elseif senderRdioOn and listenerRdioOn and senderChnl == listenerChnl then
			return true
		else
			return false
		end
	end
	return true, true
end

function GM:PlayerCanSeePlayersChat( strText, bTeamOnly, pListener, pTalker )
	if not pTalker:IsPlayer() then return true end

	local curDistance = pListener:GetShootPos():Distance(pTalker:GetShootPos())
	local maxDistance = GetConVarNumber("pnrp_voiceDist")
	local senderChnl = pTalker.Channel
	local listenerChnl = pListener.Channel
	local senderRdioOn = (pTalker.RdioPower and pTalker:HasWeapon("weapon_radio"))
	local listenerRdioOn = (pListener.RdioPower and pListener:HasWeapon("weapon_radio"))
	
	if string.lower(string.sub(strText, 1, 4 )) == "/ooc" or string.lower(string.sub(strText, 1, 2 )) == "//" then return true end
	
	if GetConVarNumber("pnrp_voiceLimit") == 1 then
		if curDistance < maxDistance then
			return true
		elseif senderRdioOn and listenerRdioOn and senderChnl == listenerChnl then
			return true
		else
			return false
		end
	end
	return true
end

--EOF